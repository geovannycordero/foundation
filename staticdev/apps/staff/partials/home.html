<toaster-container></toaster-container>

<div class='panel panel-default' ng-init="show_all=false">

  <div class='panel-heading'>Top Patients List</div>

  <div class='panel-body'>

    <table class='table'>
          <thead>
              <th> Name </th>
              <th> Active uncontrolled problems </th>
              <th> Todos </th>
              <th> Multiply</th>
          </thead>
          <tbody>
              <tr ng-repeat='patient in patients_list' ng-show="$index < 10 || show_all">
                  <td> <a href='/u/patient/manage/{{patient.user.id}}/'>
                          {{patient.user.first_name}} {{patient.user.last_name}}
                       </a>  
                   </td>
                  <td> {{patient.problem }} </td>
                  <td> {{patient.todo}} </td>
                  <td> {{patient.multiply}} </td>
              </tr>
          </tbody>
   </table>
   <a href class="btn btn-default" ng-click="show_all=!show_all">
    <span ng-if='show_all==false'>Show all </span>
    <span ng-if='show_all==true'>Not show all </span>
   </a>

  </div>

</div>

<div class='panel panel-default'>

  <div class='panel-heading'> Labeled Todos Lists </div>

  <div class='panel-body'>
    <form class='form-inline' role='form' ng-submit='add_todo_list(new_list)'>
      <div class='form-group'>
        <label> Labeled Todos Lists Name </label>
        <input type='text' ng-model='new_list.name'>
        <br>
        <div class="quick-card-editor-label labeled-list">
          <div ng-repeat="label in labels">
            <a href class="todo-label" ng-class="label.css_class" ng-click="add_new_list_label(new_list, label)">
              {{label.name}}
              <i class="fa fa-check" ng-repeat="l in new_list.labels" ng-if="l.id==label.id"></i>
            </a>
          </div>
        </div>
      </div>
      <br>
      <br>
      <button type='submit' class='btn btn-default'> Add List </button>
      <br>
    </form>
  </div>
</div>

<div class='panel panel-default' ng-repeat="list in todo_lists" ng-init="list.show_accomplished=false">

  <div class='panel-heading'> {{list.name}} <a href class="btn btn-danger" ng-click="delete_list(list)">Delete</a></div>

  <div class='panel-body'>
    <todo ng-model="list.todos" accomplished="false" show-problem="true" is-list="list.id"></todo>
    <hr>
    <a class='btn btn-default btn-md' ng-click='list.show_accomplished=!list.show_accomplished'> 
      <span ng-if='list.show_accomplished==false'>Show accomplished Todos </span>
      <span ng-if='list.show_accomplished==true'>Hide accomplished Todos </span>
    </a>
    <hr>
    <div class="col-md-12" ng-show='list.show_accomplished==true'>
      <todo ng-model="list.todos" accomplished="true" show-problem="true" is-list="list.id"></todo>
    </div>
  </div>
</div>

<div class='panel panel-default' ng-init="show_accomplished_personal_todos=false">

  <div class='panel-heading'> Personal Todos </div>

  <div class='panel-body'>
    <todo ng-model="personal_todos" accomplished="false" show-problem="true" is-tagged="false"></todo>
    <hr>
    <a class='btn btn-default btn-md' ng-click='show_accomplished_personal_todos=!show_accomplished_personal_todos'> 
      <span ng-if='show_accomplished_personal_todos==false'>Show accomplished Todos </span>
      <span ng-if='show_accomplished_personal_todos==true'>Hide accomplished Todos </span>
    </a>
    <hr>
    <div class="col-md-12" ng-show='show_accomplished_personal_todos==true'>
      <todo ng-model="personal_todos" accomplished="true" show-problem="true" is-tagged="false"></todo>
    </div>
    <form class='form-inline' role='form' ng-submit='add_todo(new_todo)'>
        <div class='form-group'>
          <label> Todo Name </label>
          <input type='text' ng-model='new_todo.name' id='todoNameInput'>
        </div>

        <button type='submit' class='btn btn-default'> Add Todo </button>

      </form>
  </div>
</div>


<div class='panel panel-default' ng-init="show_accomplished_tagged_todos=false">

  <div class='panel-heading'> Tagged Todos </div>

  <div class='panel-body'>
    <todo ng-model="tagged_todos" accomplished="false" show-problem="true" is-tagged="true"></todo>
    <hr>
    <a class='btn btn-default btn-md' ng-click='show_accomplished_tagged_todos=!show_accomplished_tagged_todos'> 
      <span ng-if='show_accomplished_tagged_todos==false'>Show accomplished Todos </span>
      <span ng-if='show_accomplished_tagged_todos==true'>Hide accomplished Todos </span>
    </a>
    <hr>
    <div class="col-md-12" ng-show='show_accomplished_tagged_todos==true'>
      <todo ng-model="tagged_todos" accomplished="true" show-problem="true" is-tagged="true"></todo>
    </div>
  </div>
</div>


<div ng-if="active_user.role=='physician'" class="physician-view">
  <div class='panel panel-default'>
    <div class='panel-heading'>
      Registered Users
    </div>
    <div class='panel-body'>
      <center>
        <h4 class='text-info'> Registered Users </h4>
      </center>
      <hr>
      <input type='text' class='form-control' ng-model='query_users' placeholder='Search...'>
      <hr>
      <table class='table' >
        <thead>
          <tr>
            <th class="sort selected" sortBy='givenName' sortOrder="desc">First Name</th>
            <th class="sort " sortBy='familyName' sortOrder="desc">Last Name</th>
            <th class="sort " sortBy='login' sortOrder="desc">Username</th>
            <th class="sort " sortBy='birthDate' sortOrder="desc">Role</th>
            <th class="sort " sortBy='sex' sortOrder="desc">Sex</th>
            <th>Contact Number</th>
            <th>Action</th>
          </tr>
        </thead>

        <tbody>

          <tr ng-repeat='user in users|filter:query_users'>
            <td> {{user.user.first_name}} </td>
            <td> {{user.user.last_name}} </td>
            <td> {{user.user.username}} </td>
            <td> {{user.role}} </td>
            <td> {{user.sex}} </td>
            <td> {{user.phone_number}} </td>
            <td>
                <a href='/project/admin/#/edit/{{user.user.id}}/'  class='btn btn-sm btn-default'>
                    Edit 
                </a>

                <a href='/u/patient/manage/{{user.user.id}}/' class='btn btn-sm btn-default'  ng-show='user.role=="patient"'>
                    Manage
                </a>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <div class='panel panel-default' id='patientsAssignedInfo'>
    <div class='panel-heading'> Patients Assigned</div>
      <div class='panel-body'>
        <table class='table'>
          <thead>
              <th> Name </th>
              <th> Username </th>
              <th> Contact Number </th>
              <th> Actions </th>
          </thead>
          <tbody>
              <tr ng-repeat='patient in patients'>
                  <td> {{patient.user.first_name}} {{patient.user.last_name}} </td>
                  <td> {{patient.user.username}} </td>
                  <td> {{patient.phone_number}} </td>
                  <td> <a href='/u/patient/manage/{{patient.user.id}}/' class='btn btn-sm btn-default'         ng-show='patient.role=="patient"'>
                          Manage
                       </a>
                  </td>
              </tr>
          </tbody>
         </table>
        </div>
      </div>

  <div class='panel panel-default' id='nursesAssignedInfo'>
    <div class='panel-heading'> Nurses Assigned</div>
    <div class='panel-body'>
      <table class='table'>
        <thead>
            <th> Name </th>
            <th> Username </th>
            <th> Contact Number </th>

        </thead>
        <tbody>
            <tr ng-repeat='nurse  in team.nurses'>
                <td> {{nurse.user.first_name}} {{nurse.user.last_name}} </td>
                <td> {{nurse.user.username}} </td>
                <td> {{nurse.phone_number}} </td>
            </tr>
        </tbody>
      </table>

    </div>
  </div>

  <div class='panel panel-default' id='midLevelAssignedInfo'>
    <div class='panel-heading'> Mid-Level Assigned</div>
    <div class='panel-body'>
      <table class='table'>
        <thead>
            <th> Name </th>
            <th> Username </th>
            <th> Contact Number </th>
        </thead>
        <tbody>
            <tr ng-repeat='staff  in team.mid_level_staffs'>
                <td> {{staff.user.first_name}} {{staff.user.last_name}} </td>
                <td> {{staff.user.username}} </td>
                <td> {{staff.phone_number}} </td>
            </tr>
        </tbody>
     </table>
    </div>
  </div>

  <div class='panel panel-default' id='secretaryAssignedInfo'>
    <div class='panel-heading'> Secretary Assigned</div>
    <div class='panel-body'>
     <table class='table'>
      <thead>
          <th> Name </th>
          <th> Username </th>
          <th> Contact Number </th>

      </thead>
      <tbody>
          <tr ng-repeat='staff  in team.secretaries'>
              <td> {{staff.user.first_name}} {{staff.user.last_name}} </td>
              <td> {{staff.user.username}} </td>
              <td> {{staff.phone_number}} </td>
          </tr>
      </tbody>
     </table>
    </div>
  </div>
</div>