<title>Encounter</title>
<style>
     body {background:white;     font:15px arial,sans-serif;}
     table {
     	border-collapse:collapse;
     	width:100%;
     }
 td, th {
 	border:1px solid #000;
 	padding:10px;
 	text-align:left;
 	vertical-align:top;
 }
</style>

<script src="//code.jquery.com/jquery-1.11.0.min.js"></script>
<script src="//cdn.jsdelivr.net/jplayer/2.6.1/jquery.jplayer.min.js"></script>
<link href="//vjs.zencdn.net/4.2/video-js.css" rel="stylesheet">
<script src="//vjs.zencdn.net/4.2/video.js"></script>
<script>
$(function() {
      var player = videojs('my_video_1');
     
     player.ready(function() {
       console.log('player is ready');
       
       $('#0s').click(function(e){
         e.preventDefault();
         player.currentTime(0);
       });
       
       $('#10s').click(function(e){
         e.preventDefault();
         player.currentTime(10);
       });
       
       $('#20s').click(function(e){
         e.preventDefault();
         player.currentTime(20);
       });
     });    
});

</script>
 
  <video id="my_video_1" class="video-js vjs-default-skin" controls autoplay preload="auto" width="640px" height="360px" data-setup='{}'>
   <source src="/media/{{ encounter.video }}" type='video/mp4'>
  </video>
  
  <a href="#" id="0s">0s</a>
  <a href="#" id="10s">10s</a>
  <a href="#" id="20s">20s</a>
<a href="/patient/{{ patient.id }}/">Go back to patient {{ patient.get_full_name }}</a>
{% if not encounter.audio %}
<form action="" method="post"
enctype="multipart/form-data">
<label for="file">Audio file:</label>
<input type="file" name="audio_file" id="file"><br>
<input type="submit" name="submit" value="Submit">
</form>
{% else %}
<a href="/media/{{ encounter.audio }}">Audio file</a>
{% endif %}
{% if not encounter.video %}
<form action="" method="post"
enctype="multipart/form-data">
<label for="file">Video file:</label>
<input type="file" name="video_file" id="file"><br>

<input type="submit" name="submit" value="Submit">
</form>
{% else %}
<a href="/media/{{ encounter.video }}">Video file</a>
{% endif %}
{% if not encounter.note %}
<form action="" method="post">
<strong>Note:</strong> <textarea name="note"></textarea>
<input type="submit" name="submit" value="Submit">
</form>
{% else %}
<strong>Note:</strong> {{ encounter.note }}
{% endif %}
{% if encounter.video %}
<video id="myvideo"  class="video-js vjs-default-skin"
  controls preload="auto" width="640" height="264"
  poster=""
  data-setup='{"example_option":true}'>
 <source src="/media/{{ encounter.video }}" type='video/mp4' />
 </video>
{% endif %}
<table>

<tr><th style="width:20px">Time (24 hour)</th><th style="width:20px">Video timestamp</th><th>Summary</th></tr>
<tr><td>{{ encounter.starttime|date:"H:i:s" }}</td><td>0 seconds</td><td>Encounter started</td>
{% for event in events %}
<tr><td>{{ event.datetime|date:"H:i:s" }}</td><td><input type="button" value="{{ event.video_seconds }} seconds" onclick="window.myPlayer.play();alert(window.myPlayer.currentTime());window.myPlayer.currentTime({{ event.video_seconds }});" /></td><td>{{ event.event.summary|safe }}</td>
{% endfor %}
<tr><td>{{ encounter.stoptime|date:"H:i:s" }}</td><td>seconds</td><td>Encounter stopped</td>
</table>
