{% extends "base/base.html" %}
{% block title %}  Manage Patient - {{ patient.get_full_name }}   {% endblock %}
{% block patient_header%}
<li>
    <a href="#/" class="headerWrap">
        <span class="float-right">{{patient.get_full_name}} {{ patient_profile.date_of_birth  |date:"m/d/Y"}}</span>
        {% if patient_profile.portrait_image %}
        <img src="{{ patient_profile.portrait_image.url }}" alt="" class="profileThumb float-left">
        {% endif %}
    </a>
</li>
<!--Vitals infos-->
<li id="vitals_blood_pressure"></li>
<li id="vitals_body_temperature"></li>
<li id="vitals_weight"></li>
<li id="vitals_heart_rate"></li>
{% endblock %}
{% block search %}
<form class="navbar-form navbar-left" target="_blank" action="{% url 'search' patient.id %}" method="post">
    {% csrf_token %}
    <input type='hidden' name='patient_id' value='{{ user.id }}'>
    <div class="form-group">
        <input type="text" class="form-control" placeholder="Search" name="query">
    </div>
    <button type="submit" class="btn btn-default">Submit</button>
</form>
{% endblock %}

{% block content %}
<script src="/static/apps/patient_manager/app.js" type="text/javascript" charset="utf-8"></script>
<script src="/static/apps/patient_manager/controllers/home.js" type="text/javascript" charset="utf-8"></script>
<script src="/static/apps/patient_manager/controllers/problems.js" type="text/javascript" charset="utf-8"></script>
<script src="/static/apps/patient_manager/controllers/goals.js" type="text/javascript" charset="utf-8"></script>
<script src="/static/apps/patient_manager/controllers/encounters.js" type="text/javascript"
        charset="utf-8"></script>
<script src="/static/apps/patient_manager/controllers/encountersMain.js" type="text/javascript"
        charset="utf-8"></script>
<script src="/static/apps/patient_manager/controllers/pain.js" type="text/javascript" charset="utf-8"></script>
<script src="/static/apps/patient_manager/controllers/todo.js" type="text/javascript" charset="utf-8"></script>
<script src="/static/apps/patient_manager/controllers/editUserController.js" type="text/javascript"
        charset="utf-8"></script>
<script src="/static/apps/patient_manager/controllers/a1c.js" type="text/javascript"
        charset="utf-8"></script>
<script src="/static/apps/patient_manager/controllers/manageSharingController.js" type="text/javascript"
        charset="utf-8"></script>
<script src="/static/apps/patient_manager/controllers/colon.js" type="text/javascript"
        charset="utf-8"></script>
<script src="/static/apps/patient_manager/controllers/portraitUpdateDialogController.js" type="text/javascript"
        charset="utf-8"></script>
<script src="/static/apps/patient_manager/controllers/data.js" type="text/javascript"
        charset="utf-8"></script>
<script src="/static/apps/patient_manager/controllers/medication.js" type="text/javascript"
        charset="utf-8"></script>
<script src="/static/apps/patient_manager/services/services.js" type="text/javascript" charset="utf-8"></script>

<script src="/static/apps/patient_manager/services/problemService.js" type="text/javascript"
        charset="utf-8"></script>

<script src="/static/apps/patient_manager/services/encounterFailSafeService.js"
        type="text/javascript"></script>
<script src="/static/apps/patient_manager/services/goalService.js" type="text/javascript" charset="utf-8"></script>
<script src="/static/apps/patient_manager/services/encounterService.js" type="text/javascript"
        charset="utf-8"></script>
<script src="/static/apps/patient_manager/services/todoService.js" type="text/javascript" charset="utf-8"></script>
<script src="/static/apps/patient_manager/services/a1cService.js" type="text/javascript"
        charset="utf-8"></script>
<script src="/static/apps/patient_manager/services/colonService.js" type="text/javascript"
        charset="utf-8"></script>
<script src="/static/apps/patient_manager/services/dataService.js" type="text/javascript"
        charset="utf-8"></script>
<script src="/static/apps/patient_manager/services/medicationService.js" type="text/javascript"
        charset="utf-8"></script>
<script src="/static/apps/patient_manager/services/inrService.js" type="text/javascript"
        charset="utf-8"></script>

<script src="/static/apps/patient_manager/directives/directives.js" type="text/javascript" charset="utf-8"></script>
<script src="/static/apps/patient_manager/directives/timeLineDirective.js" type="text/javascript"
        charset="utf-8"></script>
<script src="/static/apps/patient_manager/directives/todoDirective.js" type="text/javascript"
        charset="utf-8"></script>
<script src="/static/apps/patient_manager/directives/a1cDirective.js" type="text/javascript"
        charset="utf-8"></script>
<script src="/static/apps/patient_manager/directives/problemDirective.js" type="text/javascript"
        charset="utf-8"></script>
<script src="/static/apps/patient_manager/directives/colonCancerDirective.js" type="text/javascript"
        charset="utf-8"></script>
<script src="/static/apps/patient_manager/directives/medicationDirective.js" type="text/javascript"
        charset="utf-8"></script>
<script src="/static/apps/patient_manager/directives/inrDirective.js" type="text/javascript"
        charset="utf-8"></script>
<div id='ng-app' ng-app='ManagerApp' class='no-js' lang='en'>

    <input type='hidden' id='patient_id' value='{{ patient.id }}'>
    <input type='hidden' id='user_id' value='{{ user.id }}'>
    <div>

    </div>
    <div ng-view autoscroll='true'>
        Loading ....
    </div>


    {% verbatim %}
    <div id='encounter-bar' class='bottom-bar'
         ng-controller='EncountersMainCtrl'
         ng-show='show_encounter_ui==true'>
        <ng-audio-recorder id='audioInput' audio-model='recordedInput' show-player="false"
                           on-conversion-complete="convert_is_finished()"
                           on-record-start="record_start()">
            <div ng-if="!recorder.isAvailable">
                Message for users when recording is not possible.
            </div>
        </ng-audio-recorder>
        <div class='row' id='encounter-box'>

            <div class='col-md-12' ng-show='encounter_flag==false'>
                <button class='btn btn-warning btn-md' ng-click='start_encounter()'>
                    Start Encounter
                </button>
            </div>

            <div class='col-md-12' ng-show='encounter_flag==true'>

                <div class='row'>

                    <div class='col-md-6'>

                        <button class='btn btn-warning btn-md' ng-click='stop_encounter()'>
                            Stop Encounter
                        </button>
                        <button class='btn btn-default btn-md' ng-click='view_encounter()'>
                            View Encounter
                        </button>

                        <!-- Pause/Resume recorder while encountering | Disable while converting -->
                        <button type="button" class="btn btn-default" aria-label="Left Align"
                                ng-if="!encounterCtrl.status.isConverting"
                                ng-click='toggle_recorder()'>
                                <span ng-if="!encounterCtrl.status.isRecording" class="glyphicon glyphicon-play"
                                      aria-hidden="true"></span>
                            <span ng-if="encounterCtrl.status.isRecording" class="glyphicon glyphicon-pause"
                                  aria-hidden="true"></span>
                        </button>
                        <span>Record time elapsed: {{ elapsedTime*1000 | duration }}</span>
                    </div>

                    <div class='col-md-4'>

                        <input type='text'
                               placeholder='What are you doing right now ?' class='form-control'
                               ng-model='event_summary'>
                    </div>

                    <div class='col-md-2'>
                        <button class='btn btn-default btn-block btn-md' ng-click='add_event_summary()'>
                            Add Event Summary
                        </button>
                    </div>
                </div>

            </div>
        </div>
    </div>
    {% endverbatim %}
</div>
{% endblock %}
{% block page_js %}
{% endblock %}
{% block page_css %}
{% endblock %}
